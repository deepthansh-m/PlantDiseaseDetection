<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center translatable">Plant Disease Detector</h2>
    <div class="form-group text-center">
        <input type="file" id="imageUpload" accept="image/*" onchange="previewImage()">
        <div class="image-preview" id="imagePreview">
            <img id="previewImg" src="" alt="Image Preview">
        </div>
        <button class="btn btn-primary mt-3 translatable" onclick="predictDisease()">Analyse Disease</button>
    </div>
    <div id="predictionResult" class="text-center mt-3 translatable"></div>
    <div class="form-group text-center mt-4">
        <button id="solutionButton" style="display: none;" class="translatable">View Solution</button>
        <label for="languageSelect" class="translatable">Select Language</label>
        <select id="languageSelect" class="form-control" onchange="translateText()">
            <option value="en" class="translatable">English</option>
            <option value="hi" class="translatable">Hindi</option>
            <option value="bn" class="translatable">Bengali</option>
            <option value="te" class="translatable">Telugu</option>
            <option value="ta" class="translatable">Tamil</option>
            <option value="mr" class="translatable">Marathi</option>
            <option value="gu" class="translatable">Gujarati</option>
            <option value="kn" class="translatable">Kannada</option>
            <option value="ml" class="translatable">Malayalam</option>
            <option value="or" class="translatable">Odia</option>
            <option value="pa" class="translatable">Punjabi</option>
            <option value="as" class="translatable">Assamese</option>
            <option value="ur" class="translatable">Urdu</option>
            <option value="ne" class="translatable">Nepali</option>
            <option value="si" class="translatable">Sinhalese</option>
            <option value="bh" class="translatable">Bhojpuri</option>
            <option value="ma" class="translatable">Magahi</option>
            <option value="bo" class="translatable">Bodo</option>
            <option value="rj" class="translatable">Rajasthani</option>
            <option value="ks" class="translatable">Kashmiri</option>
            <option value="san" class="translatable">Sanskrit</option>
        </select>
        <button class="btn btn-secondary mt-2  translatable" onclick="textToSpeech()">Listen</button>
    </div>
</div>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script>
    function previewImage() {
        const file = document.getElementById('imageUpload').files[0];
        const previewImg = document.getElementById('previewImg');
        const imagePreview = document.getElementById('imagePreview');

        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                previewImg.src = e.target.result; // Set the source of the image
                imagePreview.style.display = 'block'; // Show the image preview
            }
            reader.readAsDataURL(file);
        } else {
            imagePreview.style.display = 'none'; // Hide the preview if no file is selected
        }
    }
    function viewSolution() {
        const disease = sessionStorage.getItem('disease');
        if (disease) {
            window.location.href = `/solution/${disease}`;
        }
    }
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('{{ url_for('static', filename='service-worker.js') }}')
            .then(() => console.log("Service Worker registered"))
            .catch(error => console.log("Service Worker registration failed:", error));
    }
</script>
</body>
</html>
